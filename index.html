<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia at 2018-01-02 -->
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>FlatPack &#x2013; Introduction</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
        <meta name="author" content="Paul Zepernick" />
        <meta name="Date-Revision-yyyymmdd" content="20180102" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      </head>
  <body class="composite">
    <div id="banner">
                  <a href="http://www.appendium.com" id="bannerLeft">
                                                <img src="images/appendium_logo.jpg" alt="" />
                </a>
                        <a href="http://www.objectlab.co.uk/" id="bannerRight">
                                                <img src="images/objectlab_logo.jpg" alt="" />
                </a>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                                <div class="xleft">
        Last Published: 2018-01-02
                  &nbsp;| Version: 4.0.2-SNAPSHOT
                      </div>
            <div class="xright">            <a href="index.html">Main</a>
            |
                <a href="flatpack/index.html">FlatPack Lib</a>
            |
                <a href="../../flatpack/flatpack/">GitHub</a>
            |
                <a href="https://sourceforge.net/projects/flatpack/" class="externalLink">sf.net/projects/flatpack</a>
              
                      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                                                <h5>FlatPack</h5>
                  <ul>
                  <li class="none">
                  <a href="flatpack/index.html">Main library</a>
            </li>
                  <li class="none">
                  <a href="documentation/index.html">Documentation</a>
            </li>
                  <li class="none">
                  <a href="parsing.html">Examples</a>
            </li>
                  <li class="none">
                  <a href="history.html">History</a>
            </li>
                  <li class="none">
                  <a href="features.html">Features</a>
            </li>
                  <li class="none">
                  <a href="flatpack-examples/index.html">Examples</a>
            </li>
                  <li class="none">
                  <a href="apidocs/index.html">JavaDoc</a>
            </li>
                  <li class="none">
                  <a href="press/index.html">In the press</a>
            </li>
                  <li class="none">
                  <a href="code-metrics.html">Code Metrics</a>
            </li>
          </ul>
                       <h5>Modules</h5>
                  <ul>
                  <li class="none">
                  <a href="flatpack/index.html">FlatPack</a>
            </li>
                  <li class="none">
                  <a href="flatpack-examples/index.html">FlatPack Examples</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                                                                                                                                                                            <li class="expanded">
                  <a href="project-info.html">Project Information</a>
                    <ul>
                      <li class="none">
            <strong>About</strong>
          </li>
                      <li class="none">
                  <a href="plugin-management.html">Plugin Management</a>
            </li>
                      <li class="none">
                  <a href="distribution-management.html">Distribution Management</a>
            </li>
                      <li class="none">
                  <a href="dependency-info.html">Dependency Information</a>
            </li>
                      <li class="none">
                  <a href="dependency-convergence.html">Dependency Convergence</a>
            </li>
                      <li class="none">
                  <a href="source-repository.html">Source Repository</a>
            </li>
                      <li class="none">
                  <a href="mail-lists.html">Mailing Lists</a>
            </li>
                      <li class="none">
                  <a href="issue-tracking.html">Issue Tracking</a>
            </li>
                      <li class="none">
                  <a href="integration.html">Continuous Integration</a>
            </li>
                      <li class="none">
                  <a href="plugins.html">Project Plugins</a>
            </li>
                      <li class="none">
                  <a href="license.html">Project License</a>
            </li>
                      <li class="none">
                  <a href="modules.html">Project Modules</a>
            </li>
                      <li class="none">
                  <a href="dependency-management.html">Dependency Management</a>
            </li>
                      <li class="none">
                  <a href="team-list.html">Project Team</a>
            </li>
                      <li class="none">
                  <a href="project-summary.html">Project Summary</a>
            </li>
                      <li class="none">
                  <a href="dependencies.html">Dependencies</a>
            </li>
              </ul>
        </li>
                                                                                                                                                                                                                    <li class="collapsed">
                  <a href="project-reports.html">Project Reports</a>
                  </li>
          </ul>
                       <h5>Links</h5>
                  <ul>
                  <li class="none">
                  <a href="http://qalab.sourceforge.net/" class="externalLink">QALab</a>
            </li>
                  <li class="none">
                  <a href="http://objectlabkit.sourceforge.net/" class="externalLink">ObjectLab Kit</a>
            </li>
                  <li class="none">
                  <a href="http://jtreemap.sourceforge.net/" class="externalLink">JTreeMap</a>
            </li>
                  <li class="none">
                  <a href="http://www.statsvn.org/" class="externalLink">StatSVN</a>
            </li>
                  <li class="none">
                  <a href="http://www.objectlab.co.uk" class="externalLink">ObjectLab</a>
            </li>
                  <li class="none">
                  <a href="http://www.appendium.com" class="externalLink">Appendium</a>
            </li>
          </ul>
                                                                                                                   <a href="http://sourceforge.net" title="Hosted on SourceForge.net" class="poweredBy">
        <img class="poweredBy"  alt="Hosted on SourceForge.net" src="http://sflogo.sourceforge.net/sflogo.php?group_id=175139&type=2"    />
      </a>
                                                                                                      <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy"  alt="Built by Maven" src="http://maven.apache.org/images/logos/maven-feather.png"    />
      </a>
                             
                            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        
  
    <!-- The body of the document contains a number of sections -->
    
<div class="section">
<h2><a name="News"></a>News</h2>
	
<p style="margin-top:10px; margin-bottom:0; padding-bottom:0; text-align:center; line-height:0"><a class="externalLink" href="http://feeds.feedburner.com/~r/ObjectlabOpenSourceNews/~6/1"><img src="http://feeds.feedburner.com/ObjectlabOpenSourceNews.1.gif" alt="ObjectLab Open Source News" style="border:0" /></a></p>
<p style="margin-top:5px; padding-top:0; font-size:x-small; text-align:center"><a class="externalLink" href="http://www.feedburner.com/fb/a/headlineanimator/install?id=829470&amp;w=1" target="_blank">Grab this Headline Animator</a></p>

	
<p>Reminder: we have moved to <a class="externalLink" href="http://www.github.com/appendium/flatpack">GitHub</a>.</p>

	
<p><b>We have two branches: 3_4_branch which remains JDK 1.5 and master/4_x which is JDK8.</b> New development will be limited to master.</p>

    
<p>September 04, 2014: FlatPack 4.0.0 is released, JDK8 Release! with some fluent changes, see the <a href="changes-report.html">change log</a></p>
    </div>


    
<div class="section">
<h2><a name="FlatPack_Introduction"></a>FlatPack Introduction</h2>

    
<p>FlatPack came out of the frustration of having to mix file parsing logic with business logic.</p>

    
<p>FlatPack on SourceForge: a Java (1.8+) flat file parser that handles CSV (including values containing ','), 
    fixed length and custom delimiters. 
    The formats can be configured in XML, it is fast and released under Apache license 2.0.</p>

	
<p>Starting at release 3.1, FlatPack introduces <b>exporters</b> via the writer package. This mechanism allows you to export a DataSet to a fixed length or delimited format. A big thank you to Dirk and Holger from the <a class="externalLink" href="http://www.mulesource.org">Mule project</a>
	for the initial code contribution. FlatPack should integrate nicely with Mule, the open source choice for integration and SOA.</p>

    
<p>Substrings in a <b>fixed width parse</b> can be daunting to deal with when trying to analyze what existing code is doing,
    and what about when you have no comments...</p>

    
<p>We also provide <b>delimited file parsing</b>; works with any delimiter / qualifier, multiline records, delimiter or qualifier allowed in column value.</p>

    
<p>A manual is available as <a href="documentation/flatpack-manual.doc">Word</a> document or a <a href="documentation/flatpack-manual.pdf">PDF</a>.</p>

    
<p>FlatPack is part of the ObjectLab Kit family.</p>

    
<div class="section">
<h3><a name="Why_should_you_use_FlatPack"></a>Why should you use FlatPack?</h3>

	
<p>There is more to it than one could imagine at first sight:</p>
	
<ul>

	
<li><b>Problem Sorting Data Prior To File Processing?</b></li>
	
<ul>
<li>FlatPack provides a sorting mechanism for your flat files.  This allows for your data to be properly sorted before processing your business logic.</li></ul>
    	
<li><b>Bad Numeric Data?</b></li>
    	
<ul>
<li>Do you often receive numeric data with dollar signs, or commas?  FlatPack has the ability to strip these out and return as a double or int.
            Even empty elements or hard spaces can be converted to a numeric without issue.</li></ul>

    	
<li><b>Problems With One Bad Record Blowing Up The Entire Parse?</b></li>
        
<ul>
<li>Bad records get excluded from the DataSet and added to an error collection.  This error collection can be checked at the end of the parse to
        report on bad records.  A description of the error and the line number in the file is provided.  Why blow up an entire import for one bad record?</li></ul>
        </ul>
    </div>

    
<div class="section">
<h3><a name="Which_JDK"></a>Which JDK?</h3>
        
<p>1.8 and up</p>
    </div>

    </div>

    
<div class="section">
<h2><a name="How_do_I_use_it"></a>How do I use it?</h2>
    
<p>Basic Steps</p>
    
<ol style="list-style-type: decimal">
    	
<li>Obtain a Parser from a parser factory (DefaultParserFactory) with a  File, InputStream, or a reader(coming soon)</li>
    	
<li>Set additional Parser options, Parser.setAnOption()</li>
        
<li>Obtain a DataSet Parser.parse()</li>
    	
<li>Call DataSet.next() to advance record pointer</li>
    	
<li>Process columns; DataSet.getString(&quot;colname&quot;), getInt(&quot;colname&quot;), getDouble(&quot;colname&quot;), getDate(&quot;colname&quot;), etc</li>
        
<li>Check for parse errors; DataSet.getErrors()</li>
    </ol>

    
<div class="section">
<h3><a name="New_JDK8_to_Read_Delimited_File"></a>New JDK8 to Read Delimited File</h3>
    
    <script src="https://gist.github.com/benoitx/3e40808566d62c724232.js"></script>
    
    </div>

    
<div class="section">
<h3><a name="New_way_to_Read_Delimited_File_With_Immutable_Record"></a>New way to Read Delimited File With Immutable Record</h3>

    
<div class="source">
<div>
<pre>
    // Obtain the proper parser for your needs: basic CSV Parser with column Header
    Parser parser = DefaultParserFactory.newCsvParser(new FileReader(&quot;DataFile.csv&quot;));

    //obtain DataSet
    StreamingDataSet ds = parser.parseAsStream();

    while (ds.next()){ //loop through file
        Record record = ds.getRecord(); // immutable object, you can give it to a thread.
        String value = record.getString(&quot;mycolumnName&quot;); // columns name are case INsensitive
    }
    </pre></div></div>

    </div>



    
<div class="section">
<h3><a name="Reading_Delimited_File_With_Column_Mapping"></a>Reading Delimited File With Column Mapping</h3>

    
<div class="source">
<div>
<pre>
    //Obtain the proper parser for your needs
    Parser parser = DefaultParserFactory.getInstance().newDelimitedParser(
        new FileReader(&quot;map.fpmap.xml&quot;), //xml column mapping
        new FileReader(&quot;DataFile.txt&quot;),  //txt file to parse
        ',', //delimiter
        '&quot;', //text qualfier
        false); //ignore the first record (may need to be done if first record contain column names)

    //obtain DataSet
    DataSet ds = parser.parse();

    while (ds.next()){ //loop through file
       ds.getString(&quot;mycolumnName&quot;);
    }
    </pre></div></div>

    </div>

    
<div class="section">
<h3><a name="Reading_Delimited_File_Column_Names_In_First_Record_Of_File"></a>Reading Delimited File Column Names In First Record Of File</h3>

    
<div class="source">
<div>
<pre>
    //Obtain the proper parser for your needs
    Parser parser = DefaultParserFactory.getInstance().newDelimitedParser(
        new FileReader(&quot;DataFile.txt&quot;),  //txt file to parse
        ',', //delimiter
        '&quot;'); //text qualifier

    //obtain DataSet
    DataSet ds = parser.parse();

    while (ds.next()){ //loop through file
        ds.getString(&quot;mycolumnName&quot;);
    }
    </pre></div></div>

    </div>


    
<div class="section">
<h3><a name="Reading_Fixed_Width_File"></a>Reading Fixed Width File</h3>

    
<div class="source">
<div>
<pre>
    //Obtain the proper parser for your needs
    Parser parser = DefaultParserFactory.getInstance().newFixedLengthParser(
    	new FileReader(&quot;map.fpmap.xml&quot;), //fixed with column map
        new FileReader(&quot;DataFile.txt&quot;));  //txt file to parse

    //obtain DataSet
    DataSet ds = parser.parse();

    while (ds.next()){ //loop through file
        ds.getString(&quot;mycolumnName&quot;);
    }
    </pre></div></div>

    </div>

    
<div class="section">
<h3><a name="Reading_a_Message_of_Fixed_Width"></a>Reading a Message of Fixed Width</h3>

    
<div class="source">
<div>
<pre>
	final String msg = &quot;data     data2     data3     data4&quot;
	//Obtain the proper parser for your needs
    Parser parser = DefaultParserFactory.getInstance().newFixedLengthParser(
    	new FileReader(&quot;map.fpmap.xml&quot;), //fixed with column map to bind col names
        new StringReader(mag));  //data to parse

    //obtain DataSet
    DataSet ds = parser.parse();

    while (ds.next()){ //loop through file
       ds.getString(&quot;mycolumnName&quot;);
    }
    </pre></div></div>

    </div>

    
<div class="section">
<h3><a name="Using_SLF4J_With_FlatPack"></a>Using SLF4J With FlatPack</h3>

    
<div class="source">
<div>
<pre>
Slf4j is utilized to capture logging information that occurred during a parse.
By default, this information will be logged to the console.  SLF supports the following loggers; log4j, jcl, nop, and jdk1.4.
Please go to http://www.slf4j.org to download the proper jar for your logging preference.  Here is a typical SLF4j setup:

SLF-api-XXX.jar + SLF-MyLoggerPreference.jar + MyLogger.jar (lo4j.jar for example)

Here are the steps that would need to be taken for log4j:

1.	Install log4j.jar
2.	Setup log4j.properties or log4j.xml
3.	Install SLF-api-XXX.jar
4.	Install SLF-log4j12-XXX.jar
    </pre></div></div>

    </div>


    </div>

  

      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">&#169;            2006-2018
              Appendium - Portfolio Financing Platform
            
                       - <a href="http://maven.apache.org/privacy-policy.html">Privacy Policy</a></div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
